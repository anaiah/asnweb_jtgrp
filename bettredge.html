<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">


  <title>BESI</title>
  <!-- <link rel="shortcut icon" type="image/png" href="/html/assets/images/logos/favicon.png" /> -->
  <link rel="shortcut icon" href="/html/assets/images/logos/besi_logo.png" type="image/x-icon" sizes="32x32">  

  <!-- <link rel="stylesheet" href="/html/assets/bootstrap/css/bootstrap.min.css?h=0516002ac6166f9bc5a60df257b0e1f8"> -->
  
  <link rel="stylesheet" href="/html/assets/css/styles.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />

  <!---//toastify cdn-->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" href="/html/assets/css/osndp.css" />
</head>

<body id="myBody">
  <!--  Body Wrapper -->
  <div id="kutos">
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed">

    <div class="position-relative overflow-hidden min-vh-100 d-flex align-items-center justify-content-center">
      <div class="d-flex align-items-center justify-content-center w-100">
        <div class="row justify-content-center w-100">
          <div class="col-md-8 col-lg-6 col-xxl-3">

             <!--//START OF CARD-->
            
             <div class="card mb-0 fade-in" id="myCard">
              <div class="card-body w-70">
                <!--//company logo -->
                <a href="/besi" class="text-nowrap logo-img text-center d-block py-3 w-100">
                  <img src="/html/assets/images/logos/besi_main_logo.jpg"  width="180" alt="" />
                </a>

                <p class="text-center">Beta v.1.4</p>
                <!--//end company logo -->
                <form id="loginForm" name="loginForm" class="needs-validation">
                  
                  <!--//=== ALERT CONTAINER!!!-->
                  <div id="loginPlaceHolder"></div>
                  <!--//END ALERT-->

                  <div class="mb-3">
                    <i class="ti ti-map" style="color:blue"></i>
                    <label for="region" class="form-label">Region</label>
                    <select class="form-select login" id="region" name="region" required>
                        <option value="">Select Region</option>
                        <option value="cmnl">NCR-CMNL</option>
                        <option value="cmnva">NCR-CMNVA</option>
                        <option value="smnl">NCR-SMNL</option>
                        <!-- Add more options here as needed -->
                    </select>
                    <div class="invalid-feedback">
                      Select Region
                    </div>
                    <div class="valid-feedback">
                      Looking Good!
                    </div>
                  </div>
                  <div class="mb-3">
                    <i class="ti ti-user" style="color:blue"></i>
                    <label for="uid" class="form-label">Username</label>
                    <input type="email" class="form-control login" id="uid" name="uid" aria-describedby="emailHelp" required>
                    <div class="invalid-feedback">
                      Enter valid email address
                    </div>
                    <div class="valid-feedback">
                        Looking Good!
                    </div>
                  </div>
                  
                  <div class="mb-4">
                    <i class="ti ti-password-user" style="color:blue"></i>
                    <label for="pwd" class="form-label">Password</label>
                    <input type="password" class="form-control login" id="pwd" name="pwd" required>
                    <div class="invalid-feedback">
                      Enter valid password
                    </div>
                    <div class="valid-feedback">
                        Looking Good!
                    </div>
                
                  </div>

                  <div class="mb-4">
                    
                    <div class="row">
                      <span id="hub" style="font-size: 10px;"></span>
                    </div>
                  </div>
                  
              
                  
                  <div class="modal-footer">
                    <button class="btn btn-danger" onclick="javascript:main.help()"  type="button"><i class="ti ti-help"></i> HELP</button>&nbsp;&nbsp;
                    <button class="btn btn-primary"  id="loginbtn" onclick="main.checkinput()" type="button">
                      <i class="ti ti-login"></i>
                      &nbsp;Login</button>
                  </div>

                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--//Modal for adding New Site //-->
<div class="modal fade" id="newempModal" tabindex="-1" aria-labelledby="newsiteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen modal-dialog-scrollable">
      <div class="modal-content">
          
          <div class="modal-header bg-primary">
              <h4 class="modal-title"><i class="bi-pencil-square" style="font-size:17px"></i> Create Account</h4>
              <button class="btn-close" type="button" data-bs-dismiss="modal"></button>
          </div>

          <!--//modal body-->
          <div class="modal-body">
              
              <!--//=== ALERT CONTAINER!!!-->
              <div id="newsitePlaceHolder"></div>
              <!--//END ALERT-->

              <div class="container-fluid" >	
                  <!--//form goes here -->
                  <!--//FORM SIGNUP-->
                  <form id="newempForm" class="needs-validation row gy-2 gx-2 align-items-center" method="GET" novalidate>
                    <div class="container mt-5">
                      <h2>HRIS 201 Form</h2>
                      
                          <div class="mb-3">
                              <label for="employeeId"  class="form-label">Employee ID</label>
                              <input type="text" class="form-control 201" id="employeeId" name="employeeId" required>
                          </div>
                          <div class="mb-3">
                              <label for="fullName" class="form-label">Full Name</label>
                              <input type="text" class="form-control 201" id="fullName" name="fullName" required>
                          </div>
                          <div class="mb-3">
                              <label for="email" class="form-label">Email Address</label>
                              <input type="email" class="form-control 201"  value="a@b.com" id="email" name="email" required>
                          </div>
                          <div class="mb-3">
                              <label for="phone" class="form-label">Phone Number</label>
                              <input type="tel" class="form-control 201" value="0917 283 1929" id="phone" name="phone" required>
                          </div>
                          <div class="mb-3">
                              <label for="birthDate" class="form-label">Date of Birth</label>
                              <input type="date" class="form-control" value="01/01/1970" id="birthDate" name="birthDate" required>
                          </div>
                          <div class="mb-3">
                              <label for="hireDate" class="form-label">Hire Date</label>
                              <input type="date" class="form-control 201" value="01/01/2025" id="hireDate" name="hireDate" required>
                          </div>
                          <div class="mb-3">
                              <label for="jobTitle" class="form-label">Job Title</label>
                              <input type="text" class="form-control 201" value="quality cntrol" id="jobTitle" name="jobTitle" required>
                          </div>
                          <div class="mb-3">
                              <label for="department" class="form-label">Department</label>
                              <input type="text" class="form-control 201" value="IT" id="department" name="department" required>
                          </div>
                          <div class="mb-3">
                              <label for="employmentStatus" class="form-label">Employment Status</label>
                              <select class="form-control 201" id="employmentStatus" name="employmentStatus" required>
                                  <option value="" disabled>Select status</option>
                                  <option value="Full-Time" selected>Full-Time</option>
                                  <option value="Part-Time">Part-Time</option>
                                  <option value="Contract">Contract</option>
                              </select>
                          </div>
                          <div class="mb-3">
                              <label for="address" class="form-label">Address</label>
                              <textarea class="form-control 201" id="address" rows="3" name="address" required>Manila</textarea>
                          </div>
                          <!-- <button type="submit" class="btn btn-primary">Submit</button> -->
                      
                  </div>
                         
                  </form>
                  <!--//end form -->
                  
                  <div class="row">
                    <div class="col-lg-4 mb-0">
                      <!-- //form file upload onrender.com -->
                      <form id="uploadForm" name="uploadForm" action="" enctype="multipart/form-data" method="post">
                        <div class="form-outline">
                          <label class="form-label mb-0" for="uploaded_file">Upload Picture</label>
                          <input onchange="javascript:main.checkFileSize()" class="form-control equipmentxx" type="file" name="uploaded_file" id="uploaded_file" accept='image/*' required />
                          <input id="upload-btn" class="btn btn-warning lets-hide" type="submit" value="Upload">
                          <p><span id="size"></span></p>
                          <div id="blindspot"></div>
                        </div>
                      </form>
                    </div>
                  </div>
                  
              </div><!--//end container-fluid//-->
              
          </div><!--//end modalbody//-->
          <!--//footer-->
          <div class="modal-footer">
              <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
              <button class="btn btn-primary" id="mall-save-btn" onclick="javascript:util.validateMe('newempModal','#newempForm','201')" type="button">
              <i id="i-save" class="fa fa-floppy-o"></i> Save
              </button>
          </div>
      </div>
  </div>
</div>					
<!--//end newsiteModal//-->

  <style>
  /* @import url(//fonts.googleapis.com/css?family=Lato); */

    body{ 

      min-height: 100vh;
      background:url('/html/assets/images/backgrounds/asiaone1.png') no-repeat center center fixed; 
      -webkit-background-size: cover;
     -moz-background-size: cover;
     -o-background-size: cover;
     background-size: cover;

    }
    :target{
	  border:1px solid gray;
    }

    *, *::before, *::after{
      box-sizing: border-box;
    }
    .fade-in {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.7s ease, transform 0.7s ease;
    }
    .fade-in.show {
        opacity: 1;
        transform: translateY(0);
    }
  </style>
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
     -->
  <!-- <script src="/html/assets/libs/jquery/dist/jquery.min.js"></script> -->
  <script src="/html/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

  <!-- toastify -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <script src="/html/assets/js/ipconfig.js?v=8"></script>
  <script src="/html/assets/js/util.js?v=8"></script>
  <!-- <script src="/html/assets/js/login.js?v=8"></script> -->

  <script>
    gonow:true,
    
    db = window.localStorage

    document.addEventListener('DOMContentLoaded', function() {
      
      console.log('=======DOM CONTENT LOADED=====')

      // if (!main.isChrome()) {  // Use ! to check if NOT Chrome
      //   alert('PLEASE USE CHROME BROWSER!');
      //   // Prevent login
      //   let button = document.getElementById('loginbtn');
      //   if (button) { // Check if button exists before disabling
      //       button.disabled = true;
      //       button.setAttribute('aria-disabled', 'true');
      //       window.location.replace("./jtx/help");
      //   }
      // } else {
      //   // Optional: Code to execute if the browser is Chrome
      //   console.log("Chrome browser detected.");
          
      //   main.formValidate()          
      //   main.checkTime()
      //   main.checkGeoLocation()
      //   main.checkDOMLoad()
      
      // }

        main.formValidate()          
        main.checkTime()
        main.checkGeoLocation()
        main.checkDOMLoad()
      
        // let button = document.getElementById('loginbtn')
        //       button.disabled = true;
        //       button.setAttribute('aria-disabled', 'true'); //Optional, but helps screen readers
              
        //       xmsg = "<div><i class='fa fa-spinner fa-pulse' ></i>SYSTEM UNDERGOING MAINTENANCE! WE APOLOGIZE FOR THE INCONVINIENCE!</div>"
        //       util.alertMsg( xmsg,'danger','loginPlaceHolder')
        
      
    });//=====END DOM CONTENT LOADED=====

    //=============================// main object // ====================
    const main = {
      
      formValidate:()=>{
        //change form action 
        document.getElementById('uploadForm').action=`${myIp}/postimage`

        util.loadFormValidation('#loginForm')
        util.loadFormValidation('#newempForm')
        util.modalListeners('newempModal')
            
        console.log('loadformValidation() loaded==')
      },

      isChrome: () => {
        // Check for Google Chrome specifically, also excluding Edge Chromium
        return (typeof window.chrome !== 'undefined') && (navigator.userAgent.indexOf('Edg') === -1);
      },
      checkDOMLoad:()=>{
        //get frm localstorage
        if( db.getItem('profile')){
          //if there's profile set it up so rider wont type the name
          const uid = JSON.parse(db.getItem('profile'))
          //console.log(uid)
          document.getElementById('uid').value = uid.email
          document.getElementById('pwd').value ='123'
        }
        
        let bgimage = ['asiaone1.png', 'bgrnd.png']
        let xx = Math.floor(Math.random() * 2);
  
        document.getElementById('myBody').style.backgroundImage = `url('/html/assets/images/backgrounds/${bgimage[xx] }')`
        
        setTimeout(() => {
            const audio  = new Audio('/html/intro.mp3')
            audio.play().catch(error => {
                console.error("Audio playback failed:", error);
            });
            document.getElementById('myCard').classList.add('show');// show login  card
        }, 2000); // Delay of 1000 milliseconds (1 second)
      },

      checkTime:()=>{
        const now = new Date();
        const hours = now.getHours(); // returns 0-23
        const wHrs = hours % 24; //modules to get 12am as 0

        //take off temporarily checkin of time
        // if (wHrs === 0) { // Check for 12 AM (0)
        //   alert('CutOff system!')
        //   window.location.replace("./jtx/help");
        // } else if (wHrs >= 0 && wHrs < 6) { //AM period
        //   // Set your cutoff time logic here
        //   alert('CutOff system!')
        //   window.location.replace("./jtx/help");
        // }
      },

      help:()=>{
        window.location.replace("./jtx/help");
      },

      checkGeoLocation:()=>{
        //CHECK GPS FIRST
        if (navigator.geolocation) {
          
          if(db.getItem('profile')){
            const xgrp = JSON.parse(db.getItem('profile'))
            
            if(xgrp.grp_id == 1){
              main.getHubLocation()
            }else{
              console.log('no need hub loc') 
            }//eif
          }else{
            main.getHubLocation()
          }
            
        }else{
            alert('PLEASE TURN-ON YOUR PHONE LOCATION OR GPS THEN REFRESH YOUR BROWSER')
            return false
        }
      },

      //loginbtn pressed -- check input first
      checkinput:() => {
        console.log('checkinput()')
        
        try{
          if( db.getItem('profile')){
            const uid = JSON.parse( db.getItem('profile'))

            if(uid.email !== document.getElementById('uid').value){
              
            main.gonow = false

              alert('PLEASE USE THE PHONE THAT YOU USED TO REGISTER YOUR EMAIL')
                
                
            }//eif
          }else{
            main.gonow=true
          }

          util.validateMe('loginModal','#loginForm','login')
              

        }catch(error){

        }finally{
          
          if(!main.gonow){
          //     let button = document.getElementById('loginbtn')
          //     button.disabled = true;
          //     button.setAttribute('aria-disabled', 'true'); //Optional, but helps screen readers
              
              
          // }else{
            let button = document.getElementById('loginbtn')
            button.disabled = false;
            button.setAttribute('aria-disabled', 'false'); //Optional, but helps screen readers
            
            xmsg = "<div>Error, Check your Entry!</div>"
            util.alertMsg( xmsg,'danger','loginPlaceHolder')

            main.gonow = true
            
            return false
          }
          
        }//end try
      },

      ///show postiion of rider
      showPosition: (position) => { 
        
        console.log('GETTING POSITION ',position.coords.latitude, position.coords.longitude )
        
        let obj={}

        if(! db.getItem('myHub')){
          obj.lat = position.coords.latitude
          obj.lon = position.coords.longitude

          //===
          console.log( 'setting myHub localstorage===')
          db.setItem("myHub", JSON.stringify(obj))

        }else{

          obj = JSON.parse(db.getItem("myHub"))
          console.log('**localstorage already set....')
        }
        
        document.getElementById('hub').innerHTML=`WareHouse Location is ${obj.lat}, ${obj.lon}` 

        console.log(JSON.stringify(obj))
       
      },

      getHubLocation:()=>{

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition( main.showPosition );
        }else{
          alert('PLEASE TURN-ON YOUR PHONE LOCATION OR GPS')
          return false
        }
      },

      checkFileSize:()=>{
        const fi = document.getElementById('uploaded_file');
        // Check if any file is selected.
        if (fi.files.length > 0) {
            for (let i = 0; i <= fi.files.length - 1; i++) {

                const fsize = fi.files.item(i).size;
                const file = Math.round((fsize / 1024));
                // The size of the file.
                if (file >= 1000) {
                    const btnupload = document.getElementById('mall-save-btn')
                    btnupload.disabled = true

                    util.alertMsg("File too Big, please select a file less than 1mb","danger","size");
                    
                    fi.value=null
                    //go bottom page
                    util.scrollsTo('blindspot')

                    return false;

                }else{
                    
                    document.getElementById('size').innerHTML=""//reset
                    const btnupload = document.getElementById('mall-save-btn')
                    btnupload.disabled = false
                }
                /* turn off display of filesize */
                ///document.getElementById('size').innerHTML ='<b>'+ file + '</b> KB';
                
            }
        }
    }
    }
    
  </script>
  
</body>

</html>